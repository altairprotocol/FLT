<ion-header class="ion-no-border">
  <ion-toolbar class="pt-2 shadow-n bg-base text-color">
    <ion-row>
      <ion-col size="5"><ion-icon size="large" class="text-color" (click)="back();"
          name="arrow-back"></ion-icon></ion-col>
      <ion-col size="4">
        <h4 style="margin: 0; margin-top: 5px;">Voting</h4>
      </ion-col>
      <ion-col size="3">
        <div class="d-flex w-100 align-items-center justify-content-end">
          <ion-icon size="large" name="document-text-outline" (click)="refer('voting-info')"></ion-icon>
        </div>
      </ion-col>
    </ion-row>
  </ion-toolbar>
</ion-header>

<ion-content class="bg-base text-color">
  <div *ngIf="!loaded">
    <ion-list class="bg-base p-0">
      <ion-list-header class="bg-base">
        <ion-skeleton-text [animated]="true" style="width: 80px"></ion-skeleton-text>
      </ion-list-header>
      <ion-item lines="none" class="bg-base">
        <ion-thumbnail slot="start">
          <ion-skeleton-text [animated]="true"></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label>
          <h3>
            <ion-skeleton-text [animated]="true" style="width: 80%;"></ion-skeleton-text>
          </h3>
          <p>
            <ion-skeleton-text [animated]="true" style="width: 60%;"></ion-skeleton-text>
          </p>
          <p>
            <ion-skeleton-text [animated]="true" style="width: 30%;"></ion-skeleton-text>
          </p>
        </ion-label>
      </ion-item>
      <ion-item lines="none" class="bg-base">
        <ion-thumbnail slot="start">
          <ion-skeleton-text [animated]="true"></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label>
          <h3>
            <ion-skeleton-text [animated]="true" style="width: 80%;"></ion-skeleton-text>
          </h3>
          <p>
            <ion-skeleton-text [animated]="true" style="width: 60%;"></ion-skeleton-text>
          </p>
          <p>
            <ion-skeleton-text [animated]="true" style="width: 30%;"></ion-skeleton-text>
          </p>
        </ion-label>
      </ion-item>
      <ion-item lines="none" class="bg-base">
        <ion-thumbnail slot="start">
          <ion-skeleton-text [animated]="true"></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label>
          <h3>
            <ion-skeleton-text [animated]="true" style="width: 80%;"></ion-skeleton-text>
          </h3>
          <p>
            <ion-skeleton-text [animated]="true" style="width: 60%;"></ion-skeleton-text>
          </p>
          <p>
            <ion-skeleton-text [animated]="true" style="width: 30%;"></ion-skeleton-text>
          </p>
        </ion-label>
      </ion-item>
      <ion-item lines="none" class="bg-base">
        <ion-thumbnail slot="start">
          <ion-skeleton-text [animated]="true"></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label>
          <h3>
            <ion-skeleton-text [animated]="true" style="width: 80%;"></ion-skeleton-text>
          </h3>
          <p>
            <ion-skeleton-text [animated]="true" style="width: 60%;"></ion-skeleton-text>
          </p>
          <p>
            <ion-skeleton-text [animated]="true" style="width: 30%;"></ion-skeleton-text>
          </p>
        </ion-label>
      </ion-item>
      <ion-item lines="none" class="bg-base">
        <ion-thumbnail slot="start">
          <ion-skeleton-text [animated]="true"></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label>
          <h3>
            <ion-skeleton-text [animated]="true" style="width: 80%;"></ion-skeleton-text>
          </h3>
          <p>
            <ion-skeleton-text [animated]="true" style="width: 60%;"></ion-skeleton-text>
          </p>
          <p>
            <ion-skeleton-text [animated]="true" style="width: 30%;"></ion-skeleton-text>
          </p>
        </ion-label>
      </ion-item>
      <ion-item lines="none" class="bg-base">
        <ion-thumbnail slot="start">
          <ion-skeleton-text [animated]="true"></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label>
          <h3>
            <ion-skeleton-text [animated]="true" style="width: 80%;"></ion-skeleton-text>
          </h3>
          <p>
            <ion-skeleton-text [animated]="true" style="width: 60%;"></ion-skeleton-text>
          </p>
          <p>
            <ion-skeleton-text [animated]="true" style="width: 30%;"></ion-skeleton-text>
          </p>
        </ion-label>
      </ion-item>
      <ion-item lines="none" class="bg-base">
        <ion-thumbnail slot="start">
          <ion-skeleton-text [animated]="true"></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label>
          <h3>
            <ion-skeleton-text [animated]="true" style="width: 80%;"></ion-skeleton-text>
          </h3>
          <p>
            <ion-skeleton-text [animated]="true" style="width: 60%;"></ion-skeleton-text>
          </p>
          <p>
            <ion-skeleton-text [animated]="true" style="width: 30%;"></ion-skeleton-text>
          </p>
        </ion-label>
      </ion-item>
      <ion-item lines="none" class="bg-base">
        <ion-thumbnail slot="start">
          <ion-skeleton-text [animated]="true"></ion-skeleton-text>
        </ion-thumbnail>
        <ion-label>
          <h3>
            <ion-skeleton-text [animated]="true" style="width: 80%;"></ion-skeleton-text>
          </h3>
          <p>
            <ion-skeleton-text [animated]="true" style="width: 60%;"></ion-skeleton-text>
          </p>
          <p>
            <ion-skeleton-text [animated]="true" style="width: 30%;"></ion-skeleton-text>
          </p>
        </ion-label>
      </ion-item>
    </ion-list>
  </div>
  <div class="container">
    <ion-card class="m-0 p-0 mt-3 bg-base text-color" *ngFor="let item of votingItems | keyvalue">
      <ion-card-content class="voting-container d-flex align-items-center justify-content-between w-100 gap-3">
        <ion-img [src]="exchangeURL + item.value?.img"></ion-img>
        <div class="d-flex align-items-start justify-content-start flex-column w-100">
          <p class="fs-3 m-0 p-0">{{item.value?.title?.toUpperCase()}}</p>
          <div class="d-flex align-items-center justify-content-center w-100 text-center text-white mt-2">
            <div class="green-bar rounded"
              [ngStyle]="{'width': getBarPercentagesString(item.value?.zongji, item.value?.zhichi)}">
              {{ getBarPercentages(item.value?.zongji, item.value?.zhichi) }}%
            </div>
            <div class="red-bar rounded"
              [ngStyle]="{'width': getBarPercentagesString(item.value?.fandui, item.value?.zhichi)}">
              {{ getBarPercentages(item.value?.fandui, item.value?.zhichi) }}%
            </div>
          </div>
          <div class="d-flex align-items-center justify-content-around text-secondary w-100 mt-1">
            <p class="green-bar-text m-0 p-0">{{item.value?.zongji}} Votes</p>
            <p class="red-bar-text m-0 p-0">{{item.value?.fandui}} Votes</p>
          </div>

          <div class="d-flex align-items-center justify-content-between text-secondary w-100 mt-2">
            <!-- <ion-button size="small" -->
            <ion-button size="small" color="success"
              (click)="confirmAction(item.value?.assumnum,item?.value?.votecoin,  item.value?.id, 1)">
              <ion-icon name="thumbs-up-outline" style="margin-right: 5px !important;"></ion-icon>
              Upvote
            </ion-button>
            <ion-button size="small" color="danger"
              (click)="confirmAction(item.value?.assumnum,item?.value?.votecoin,  item.value?.id, 2)">
              <ion-icon name="thumbs-down-outline" style="margin-right: 5px !important;"></ion-icon>
              Downvote
            </ion-button>
          </div>
          <!-- <div class="custom-divider"></div> -->
        </div>
      </ion-card-content>
    </ion-card>
  </div>
  <!-- <app-loading-skeleton *ngIf="!loaded"></app-loading-skeleton> -->
</ion-content>